local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

-- CE CODE DOIT ÊTRE COLLÉ DANS TON FICHIER GITHUB
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- NETTOYAGE DES ANCIENNES FENÊTRES
for _, v in pairs(game:GetService("CoreGui"):GetChildren()) do
    if v:IsA("ScreenGui") and (v.Name:find("Fluent") or v:FindFirstChild("Main")) then
        v:Destroy()
    end
end

local Config = {
    Aimbot = false,
    FOV = 150,
    PlatformEnabled = false,
    FlyEnabled = false,
    FlySpeed = 50,
    InfiniteJump = false,
    Running = true,
    WPCount = 0
}

-- OBJETS (FOV & PLATEFORME)
local FOVCircle = Drawing.new("Circle")
FOVCircle.Thickness = 1
FOVCircle.Visible = false
FOVCircle.Color = Color3.fromRGB(255, 255, 255)

local Platform = Instance.new("Part")
Platform.Size = Vector3.new(8, 1, 8)
Platform.Anchored = true
Platform.CanCollide = true
Platform.Transparency = 1 
Platform.Parent = workspace

-- CRÉATION DU MENU
local Window = Fluent:CreateWindow({
    Title = "fait par 2009",
    SubTitle = "rejoin le discord",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Theme = "Dark"
})

local Tabs = {
    Joueur = Window:AddTab({ Title = "Joueur", Icon = "user" }),
    Aimbot = Window:AddTab({ Title = "Aimbot", Icon = "target" }),
    Visuels = Window:AddTab({ Title = "Visuels", Icon = "eye" }),
    Waypoints = Window:AddTab({ Title = "Waypoints", Icon = "map-pin" }),
    Divers = Window:AddTab({ Title = "Divers", Icon = "plus-circle" }),
    Physique = Window:AddTab({ Title = "Physique", Icon = "activity" })
}

-- --- JOUEUR ---
Tabs.Joueur:AddSlider("Vitesse", {Title = "Vitesse", Default = 16, Min = 16, Max = 250, Rounding = 0, Callback = function(v) if LocalPlayer.Character then LocalPlayer.Character.Humanoid.WalkSpeed = v end end})
Tabs.Joueur:AddSlider("Saut", {Title = "Saut", Default = 50, Min = 50, Max = 300, Rounding = 0, Callback = function(v) if LocalPlayer.Character then LocalPlayer.Character.Humanoid.JumpPower = v end end})
Tabs.Joueur:AddToggle("SautInf", {Title = "Saut Infini", Default = false}):OnChanged(function(v) Config.InfiniteJump = v end)

-- --- AIMBOT ---
Tabs.Aimbot:AddToggle("Aim", {Title = "Activer Aimbot", Default = false}):OnChanged(function(v) Config.Aimbot = v end)
Tabs.Aimbot:AddSlider("FOV", {Title = "Rayon FOV", Default = 150, Min = 30, Max = 800, Rounding = 0, Callback = function(v) Config.FOV = v end})

-- --- VISUELS ---
Tabs.Visuels:AddToggle("EspBox", {Title = "ESP (Bientôt)", Default = false})
Tabs.Visuels:AddButton({Title = "Full Bright", Callback = function() game:GetService("Lighting").Brightness = 2 game:GetService("Lighting").ClockTime = 14 end})

-- --- WAYPOINTS ---
Tabs.Waypoints:AddButton({
    Title = "Enregistrer Position",
    Callback = function()
        if LocalPlayer.Character then
            Config.WPCount = Config.WPCount + 1
            local pos = LocalPlayer.Character.HumanoidRootPart.CFrame
            local name = "Position " .. Config.WPCount
            Tabs.Waypoints:AddButton({
                Title = "Se TP à : " .. name,
                Callback = function() LocalPlayer.Character.HumanoidRootPart.CFrame = pos end
            })
            Fluent:Notify({Title = "Waypoints", Content = name .. " sauvegardée !"})
        end
    end
})

-- --- DIVERS ---
Tabs.Divers:AddButton({
    Title = "SUPPRIMER LE SCRIPT",
    Callback = function()
        Config.Running = false
        FOVCircle:Remove()
        Platform:Destroy()
        Window:Destroy()
    end
})

-- --- PHYSIQUE ---
Tabs.Physique:AddToggle("Fly", {Title = "Activer Fly", Default = false}):OnChanged(function(v) Config.FlyEnabled = v end)
Tabs.Physique:AddToggle("Plat", {Title = "Plateforme Bypass (E/Q)", Default = false}):OnChanged(function(v) 
    Config.PlatformEnabled = v 
    if not v then Platform.Position = Vector3.new(0, -500, 0) end
end)

-- --- LOGIQUE ---
RunService.RenderStepped:Connect(function()
    if not Config.Running then return end
    FOVCircle.Visible = Config.Aimbot
    FOVCircle.Radius = Config.FOV
    FOVCircle.Position = UserInputService:GetMouseLocation()

    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local hrp = LocalPlayer.Character.HumanoidRootPart
        if Config.FlyEnabled then
            local moveDir = Vector3.new(0,0,0)
            if UserInputService:IsKeyDown(Enum.KeyCode.W) then moveDir += Camera.CFrame.LookVector end
            if UserInputService:IsKeyDown(Enum.KeyCode.S) then moveDir -= Camera.CFrame.LookVector end
            if UserInputService:IsKeyDown(Enum.KeyCode.A) then moveDir -= Camera.CFrame.RightVector end
            if UserInputService:IsKeyDown(Enum.KeyCode.D) then moveDir += Camera.CFrame.RightVector end
            hrp.Velocity = moveDir * Config.FlySpeed
        end
        if Config.Aimbot and UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2) then
            local target = nil
            local shortest = Config.FOV
            for _, p in pairs(Players:GetPlayers()) do
                if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
                    local pos, onS = Camera:WorldToViewportPoint(p.Character.Head.Position)
                    if onS then
                        local d = (Vector2.new(pos.X, pos.Y) - FOVCircle.Position).Magnitude
                        if d < shortest then target = p shortest = d end
                    end
                end
            end
            if target then Camera.CFrame = CFrame.lookAt(Camera.CFrame.Position, target.Character.Head.Position) end
        end
        if Config.PlatformEnabled then
            Platform.Position = hrp.Position - Vector3.new(0, 3.5, 0)
            if UserInputService:IsKeyDown(Enum.KeyCode.E) then hrp.CFrame *= CFrame.new(0, 0.4, 0)
            elseif UserInputService:IsKeyDown(Enum.KeyCode.Q) then hrp.CFrame *= CFrame.new(0, -0.4, 0) end
        end
    end
end)

UserInputService.JumpRequest:Connect(function()
    if Config.InfiniteJump and LocalPlayer.Character then LocalPlayer.Character.Humanoid:ChangeState("Jumping") end
end)

Window:SelectTab(1)
