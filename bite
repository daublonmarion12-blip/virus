local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

local Window = Fluent:CreateWindow({
    Title = "VIRUS/BITE - FIX V3",
    SubTitle = "par 2009",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = false, -- Désactivé pour booster les FPS
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

local Tabs = {
    Combat = Window:AddTab({ Title = "Combat", Icon = "target" }),
    Physique = Window:AddTab({ Title = "Physique", Icon = "activity" })
}

local Config = {
    Aimbot = false,
    FOV = 150,
    Fly = false,
    Speed = 50
}

-- AJOUT DES BOUTONS (Même si le reste bug, les boutons seront là)
Tabs.Combat:AddToggle("Aim", {Title = "Activer Aimbot", Default = false}):OnChanged(function(v) Config.Aimbot = v end)
Tabs.Combat:AddSlider("FOV", {Title = "Rayon FOV", Default = 150, Min = 50, Max = 800, Callback = function(v) Config.FOV = v end})

Tabs.Physique:AddToggle("Fly", {Title = "Activer Fly", Default = false}):OnChanged(function(v) Config.Fly = v end)
Tabs.Physique:AddSlider("Vitesse", {Title = "Vitesse", Default = 50, Min = 10, Max = 300, Callback = function(v) Config.Speed = v end})

-- LOGIQUE AIMBOT
local FOVCircle = Drawing.new("Circle")
FOVCircle.Visible = false
FOVCircle.Thickness = 1.5
FOVCircle.Color = Color3.fromRGB(255, 255, 255)

local function getTarget()
    local target = nil
    local dist = Config.FOV
    for _, p in pairs(game.Players:GetPlayers()) do
        if p ~= game.Players.LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
            local pos, vis = workspace.CurrentCamera:WorldToViewportPoint(p.Character.Head.Position)
            if vis then
                local mag = (Vector2.new(pos.X, pos.Y) - game:GetService("UserInputService"):GetMouseLocation()).Magnitude
                if mag < dist then
                    target = p
                    dist = mag
                end
            end
        end
    end
    return target
end

game:GetService("RunService").RenderStepped:Connect(function()
    FOVCircle.Visible = Config.Aimbot
    FOVCircle.Radius = Config.FOV
    FOVCircle.Position = game:GetService("UserInputService"):GetMouseLocation()

    if Config.Aimbot and game:GetService("UserInputService"):IsMouseButtonPressed(Enum.UserInputType.MouseButton2) then
        local t = getTarget()
        if t then
            workspace.CurrentCamera.CFrame = CFrame.lookAt(workspace.CurrentCamera.CFrame.Position, t.Character.Head.Position)
        end
    end

    if Config.Fly and game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local root = game.Players.LocalPlayer.Character.HumanoidRootPart
        root.Velocity = Vector3.new(0, 2, 0)
        if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.W) then
            root.CFrame = root.CFrame + (workspace.CurrentCamera.CFrame.LookVector * (Config.Speed / 10))
        end
    end
end)

Window:SelectTab(1)
